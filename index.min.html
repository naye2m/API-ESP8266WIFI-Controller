<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ESP8266 API Controller</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px
        }


        h1 {
            color: #333
        }


        .container {
            margin-top: 20px
        }


        .section {
            margin-bottom: 20px
        }


        .button {
            margin: 5px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer
        }


        .button:hover {
            background-color: #0056b3
        }


        input[type=number],
        input[type=text],
        select {
            margin: 5px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd
        }


        textarea {
            margin: 5px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            width: 100%;
            height: 100px
        }


        .response {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f9fa
        }
    </style>
</head>

<body>
    <h1>ESP8266 API Controller</h1>
    <div class="container">
        <div class="section">
            <h2>LED Control</h2> <button class="button" onclick='sendRequest("/led/on")'>Turn LED On</button> <button
                class="button" onclick='sendRequest("/led/off")'>Turn LED Off</button> <button class="button"
                onclick='sendRequest("/led/blink?times=5")'>Blink LED</button> <input type="number" id="ledBrightness"
                placeholder="Brightness (0-255)"> <button class="button" onclick="setLEDBrightness()">Set LED
                Brightness</button>
        </div>
        <div class="section">
            <h2>Display Control</h2> <textarea id="displayText" placeholder="Enter text to display"></textarea> <input
                type="number" id="textSize" placeholder="Text Size (1-3)"> <input type="number" id="textX"
                placeholder="X Position"> <input type="number" id="textY" placeholder="Y Position"> <button
                class="button" onclick="displayText()">Display Text</button> <button class="button"
                onclick='sendRequest("/cleanDisplay")'>Clear Display</button> <input type="checkbox"
                id="clearBeforeRender"> Clear Before Render <button class="button" onclick="setClearBeforeRender()">Set
                Clear Before Render</button>
        </div>
        <div class="section">
            <h2>Pixel Control</h2> <input type="number" id="pixelX" placeholder="X Position"> <input type="number"
                id="pixelY" placeholder="Y Position"> <input type="number" id="pixelState"
                placeholder="State (0=Off, 1=On)"> <button class="button" onclick="setPixel()">Set Pixel</button>
        </div>
        <div class="section">
            <h2>Shape Drawing</h2> <select id="shapeType">
                <option value="rect" onselect="shapeH.hidden=!1">Rectangle</option>
                <option value="circle" onselect="shapeH.hidden=!0">Circle</option>
            </select> <input type="number" id="shapeX" placeholder="X Position"> <input type="number" id="shapeY"
                placeholder="Y Position"> <input type="number" id="shapeW" placeholder="Width/Radius"> <input
                type="number" id="shapeH" placeholder="Height (only for rectangle)"> <button class="button"
                onclick="drawShape()">Draw Shape</button>
        </div>
        <div class="section">
            <h2>Text Animation</h2> <textarea id="animateText" placeholder="Enter text to animate"></textarea> <input
                type="number" id="animateSize" placeholder="Text Size (1-3)"> <input type="number" id="animateY"
                placeholder="Y Position"> <input type="number" id="animateRepeats" placeholder="Repeats (1-10)"> <button
                class="button" onclick="animateText()">Animate Text</button>
        </div>
        <div class="section">
            <h2>2D Array Control</h2> <textarea id="displayArray"
                placeholder="Enter 128x64 array data as a binary string"></textarea> <button class="button"
                onclick="set2DArray()">Set 2D Array</button>
        </div>
    </div>
    <script>async function func(e) { return await sendRequest("/func", "POST", e, console.log) }
        async function sendRequest(e, t = "GET", n = null, a = alert) {
            let l = { method: t }
            ; n && (l.headers = { "Content-Type": "application/x-www-form-urlencoded" }
                , l.body = new URLSearchParams(n).toString()); try { const t = await fetch(e, l); a(await t.text()) }
            catch (e) { alert("Error: " + e) }
        }
        function setLEDBrightness() {
            const e = document.getElementById("ledBrightness").value; "" !== e && sendRequest("/led/brightness", "POST", { level: e }

            )
        }
        function displayText() {
            sendRequest("/display", "POST", { plain: document.getElementById("displayText").value, size: document.getElementById("textSize").value, x: document.getElementById("textX").value, y: document.getElementById("textY").value }
            )
        }
        function setClearBeforeRender() {
            sendRequest("/clearBeforeRender", "POST", { clear: document.getElementById("clearBeforeRender").checked }
            )
        }
        function setPixel() {
            const e = document.getElementById("pixelX").value, t = document.getElementById("pixelY").value, n = document.getElementById("pixelState").value; if ("" !== e && "" !== t && "" !== n) {
                sendRequest("/pixel", "POST", { x: e, y: t, state: n }

                )
            }
        }
        function drawShape() {
            const e = document.getElementById("shapeType").value, t = document.getElementById("shapeX").value, n = document.getElementById("shapeY").value, a = document.getElementById("shapeW").value, l = document.getElementById("shapeH").value; let d = ""; "rect" === e ? "" !== t && "" !== n && "" !== a && "" !== l && (d = { type: "rect", x: t, y: n, w: a, h: l }

            ) : "circle" === e && "" !== t && "" !== n && "" !== a && (d = { type: "circle", x: t, y: n, r: a }

            ), d && sendRequest("/shape", "POST", d)
        }
        function animateText() {
            const e = document.getElementById("animateText").value, t = document.getElementById("animateSize").value, n = document.getElementById("animateY").value, a = document.getElementById("animateRepeats").value; if ("" !== e) {
                sendRequest("/animateText", "POST", { text: e, size: t, y: n, repeats: a }

                )
            }
        }
        function set2DArray() {
            const e = document.getElementById("displayArray").value;
            if ("" !== e) {
                sendRequest("/setArray", "POST", { plain: e }

                )
            }

        }

    </script>